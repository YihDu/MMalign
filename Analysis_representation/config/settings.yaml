experiment:
  name: multilingual_alignment_baseline
  seed: 42
  sample_size: 20
  batch_size: 8
  languages:
    - en
    - jp-stair
    - cn
  conditions:
    mismatched:
      hard_negative: false

data:
  coco:
    data_dir: /root/personal/datasets/COCO_multilingual/data
    splits:
      - val
    caption_index: 4
    filter_empty_languages: true

# model:
#   type: qwen-vl
#   name: llava-hf/llava-1.5-7b-hf
#   revision: 'a272c74' # 否则会有Bug
#   device: cuda
#   dtype: auto

model:
  type: qwen-vl
  name: /root/personal/hf_models/Qwen-VL-2.5/7B-Instruct
  device: cuda
  dtype: auto

analysis:
  layer_mode: all
  layer_indices: []
  metrics:
    - cosine_distance
  statistics:
    t_test: false
  # fusion:
  #   image_prompt: "{image_token}"
  #   image_token: "<image>"
  #   text_prefix: ""
  #   text_suffix: ""
  #   image_pooling: mean
  fusion:
    image_token: "<|image_pad|>"
    image_prompt: "<|vision_start|>{image_token}<|vision_end|>"
    text_prefix: "<|im_start|>user\n"
    text_suffix: "<|im_end|>\n<|im_start|>assistant\n"
    image_pooling: mean
  sanity_checks:
    enabled: true
    base_condition: correct
    compare_condition: mismatched
    mean_diff_tol: 0.01
    win_rate_tol: 0.05
    min_metrics: 5

visualization:
  output_dir: report/figures
